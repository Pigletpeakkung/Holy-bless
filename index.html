<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Divine Light - Sacred Wisdom Generator</title>
  <style>
    :root {
      --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      --secondary-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      --gold-gradient: linear-gradient(135deg, #ffd89b 0%, #19547b 100%);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Georgia', serif;
      background: var(--primary-gradient);
      min-height: 100vh;
      color: #333;
      transition: all 0.3s ease;
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
      padding: 20px;
    }

    .header {
      text-align: center;
      margin-bottom: 30px;
      color: white;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
    }

    .header h1 {
      font-size: 2.5em;
      margin-bottom: 10px;
      font-weight: 300;
    }

    .header p {
      font-size: 1.1em;
      opacity: 0.9;
    }

    .controls {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 20px;
      margin-bottom: 30px;
      flex-wrap: wrap;
    }

    .theme-selector {
      padding: 8px 15px;
      border: none;
      border-radius: 25px;
      background: rgba(255,255,255,0.2);
      color: white;
      backdrop-filter: blur(10px);
      cursor: pointer;
    }

    .source-filter {
      padding: 8px 15px;
      border: none;
      border-radius: 25px;
      background: rgba(255,255,255,0.2);
      color: white;
      backdrop-filter: blur(10px);
      cursor: pointer;
    }

    .cross-button-container {
      text-align: center;
      margin: 40px 0;
    }

    .cross-button {
      position: relative;
      width: 80px;
      height: 80px;
      background: linear-gradient(135deg, #f0f0f0, #d9d9d9);
      border: none;
      border-radius: 15px;
      cursor: pointer;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
      transition: all 0.3s ease;
      transform: scale(1);
    }

    .cross-button:hover {
      background: linear-gradient(135deg, #e6e6e6, #cccccc);
      transform: scale(1.05);
      box-shadow: 0 12px 35px rgba(0, 0, 0, 0.4);
    }

    .cross-vertical {
      position: absolute;
      top: 20px;
      left: 50%;
      width: 16px;
      height: 40px;
      background: #333;
      border-radius: 6px;
      transform: translateX(-50%);
      transition: all 0.3s ease;
    }

    .cross-horizontal {
      position: absolute;
      top: 50%;
      left: 20px;
      width: 40px;
      height: 16px;
      background: #333;
      border-radius: 6px;
      transform: translateY(-50%);
      transition: all 0.3s ease;
    }

    .cross-button:hover .cross-vertical,
    .cross-button:hover .cross-horizontal {
      background: #007bff;
      box-shadow: 0 0 15px rgba(0, 123, 255, 0.5);
    }

    .cross-button.active {
      animation: divineGlow 4s ease-in-out;
    }

    @keyframes divineGlow {
      0% { box-shadow: 0 0 20px #FFD700, 0 0 40px #FFD700, 0 0 60px #FFD700; }
      25% { box-shadow: 0 0 20px #FFA500, 0 0 40px #FFA500, 0 0 60px #FFA500; }
      50% { box-shadow: 0 0 20px #FF6347, 0 0 40px #FF6347, 0 0 60px #FF6347; }
      75% { box-shadow: 0 0 20px #FF4500, 0 0 40px #FF4500, 0 0 60px #FF4500; }
      100% { box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3); }
    }

    .quote-card {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(20px);
      border-radius: 20px;
      padding: 40px;
      margin: 30px 0;
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
      transform: translateY(20px);
      opacity: 0;
      transition: all 0.6s ease;
    }

    .quote-card.show {
      transform: translateY(0);
      opacity: 1;
    }

    .quote-text {
      font-size: 1.4em;
      line-height: 1.6;
      font-style: italic;
      color: #2c3e50;
      margin-bottom: 20px;
      text-align: center;
    }

    .quote-source {
      text-align: center;
      font-size: 1em;
      color: #7f8c8d;
      font-weight: 600;
      margin-bottom: 25px;
    }

    .quote-actions {
      display: flex;
      justify-content: center;
      gap: 15px;
      flex-wrap: wrap;
      margin-top: 25px;
    }

    .action-btn {
      padding: 12px 24px;
      border: none;
      border-radius: 25px;
      cursor: pointer;
      font-size: 0.9em;
      font-weight: 600;
      transition: all 0.3s ease;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }

    .primary-btn {
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
    }

    .primary-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(102, 126, 234, 0.6);
    }

    .secondary-btn {
      background: rgba(255, 255, 255, 0.8);
      color: #333;
      border: 2px solid rgba(102, 126, 234, 0.3);
    }

    .secondary-btn:hover {
      background: rgba(102, 126, 234, 0.1);
      border-color: rgba(102, 126, 234, 0.6);
    }

    .favorite-btn {
      background: linear-gradient(135deg, #ff6b6b, #ee5a24);
      color: white;
    }

    .favorite-btn.favorited {
      background: linear-gradient(135deg, #e74c3c, #c0392b);
    }

    .daily-quote {
      background: var(--gold-gradient);
      color: white;
      padding: 30px;
      border-radius: 20px;
      margin: 30px 0;
      text-align: center;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
    }

    .daily-quote h3 {
      font-size: 1.5em;
      margin-bottom: 15px;
      font-weight: 300;
    }

    .favorites-section {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      padding: 30px;
      margin: 30px 0;
      color: white;
    }

    .favorites-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }

    .favorite-item {
      background: rgba(255, 255, 255, 0.1);
      padding: 20px;
      border-radius: 15px;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .stats {
      display: flex;
      justify-content: center;
      gap: 30px;
      margin: 30px 0;
      flex-wrap: wrap;
    }

    .stat-item {
      background: rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(10px);
      padding: 20px;
      border-radius: 15px;
      text-align: center;
      color: white;
      min-width: 120px;
    }

    .stat-number {
      font-size: 2em;
      font-weight: bold;
      display: block;
    }

    .credit {
      font-size: 0.9em;
      color: rgba(255, 255, 255, 0.8);
      text-align: center;
      margin-top: 40px;
      padding: 20px;
      background: rgba(0, 0, 0, 0.1);
      border-radius: 15px;
    }

    /* Theme variations */
    .theme-ocean {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }

    .theme-sunset {
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
    }

    .theme-forest {
      background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
    }

    .theme-cosmic {
      background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
    }

    @media (max-width: 768px) {
      .container {
        padding: 15px;
      }
      
      .header h1 {
        font-size: 2em;
      }
      
      .quote-card {
        padding: 25px;
      }
      
      .quote-text {
        font-size: 1.2em;
      }
      
      .controls {
        flex-direction: column;
        gap: 10px;
      }
    }
  </style>
</head>
<body class="theme-ocean">
  <div class="container">
    <header class="header">
      <h1>‚ú® Divine Light ‚ú®</h1>
      <p>Sacred wisdom from the masters of consciousness</p>
    </header>

    <div class="controls">
      <select class="theme-selector" id="themeSelector">
        <option value="theme-ocean">Ocean Depths</option>
        <option value="theme-sunset">Sunset Glow</option>
        <option value="theme-forest">Forest Wisdom</option>
        <option value="theme-cosmic">Cosmic Mystery</option>
      </select>

      <select class="source-filter" id="sourceFilter">
        <option value="all">All Sources</option>
        <option value="Alan Watts">Alan Watts</option>
        <option value="Buddha">Buddha</option>
        <option value="Lao Tzu">Lao Tzu</option>
        <option value="Rumi">Rumi</option>
        <option value="Law of One">Law of One</option>
        <option value="Emerald Tablet">Emerald Tablet</option>
        <option value="Conversations with God">Conversations with God</option>
        <option value="Seth Speaks">Seth Speaks</option>
        <option value="Florence Scovel Shinn">Florence Scovel Shinn</option>
      </select>
    </div>

    <div class="daily-quote" id="dailyQuote">
      <h3>üåÖ Today's Sacred Message</h3>
      <div id="dailyQuoteContent"></div>
    </div>

    <div class="stats">
      <div class="stat-item">
        <span class="stat-number" id="totalQuotes">0</span>
        <span>Total Wisdom</span>
      </div>
      <div class="stat-item">
        <span class="stat-number" id="quotesRead">0</span>
        <span>Messages Received</span>
      </div>
      <div class="stat-item">
        <span class="stat-number" id="favoriteCount">0</span>
        <span>Favorites Saved</span>
      </div>
    </div>

    <div class="cross-button-container">
      <button id="crossButton" class="cross-button" onclick="generatePassage()" aria-label="Receive divine wisdom">
        <span class="cross-vertical"></span>
        <span class="cross-horizontal"></span>
      </button>
      <p style="color: white; margin-top: 15px; font-style: italic;">Click the sacred cross to receive your message</p>
    </div>

    <div id="quoteCard" class="quote-card" style="display: none;">
      <div class="quote-text" id="quoteText"></div>
      <div class="quote-source" id="quoteSource"></div>
      <div class="quote-actions">
        <button class="action-btn primary-btn" id="playBtn">üîä Listen</button>
        <button class="action-btn favorite-btn" id="favoriteBtn">‚ù§Ô∏è Save</button>
        <button class="action-btn secondary-btn" id="shareBtn">üì§ Share</button>
        <button class="action-btn secondary-btn" id="copyBtn">üìã Copy</button>
      </div>
    </div>

    <div class="favorites-section" id="favoritesSection" style="display: none;">
      <h3>üíñ Your Sacred Collection</h3>
      <div class="favorites-grid" id="favoritesGrid"></div>
      <button class="action-btn secondary-btn" onclick="toggleFavorites()">Hide Favorites</button>
    </div>

    <button class="action-btn secondary-btn" onclick="toggleFavorites()" style="display: block; margin: 20px auto;">
      View Saved Favorites
    </button>

    <div class="credit">
      Sacred wisdom from: Conversations with God ‚Ä¢ Seth Speaks ‚Ä¢ Rumi ‚Ä¢ Alan Watts ‚Ä¢ Florence Scovel Shinn ‚Ä¢ Lao Tzu ‚Ä¢ Law of One ‚Ä¢ Emerald Tablet ‚Ä¢ Buddha ‚Ä¢ Gandhi ‚Ä¢ Einstein ‚Ä¢ Jung ‚Ä¢ Tesla ‚Ä¢ and the Quotable API
    </div>
  </div>

  <script>
    // Enhanced passages array with all your new quotes
    let passages = [
      // Conversations with God
      { text: "There is no such thing as 'wrong,' only what does not serve you. You cannot make a mistake, you can only make a choice.", id: 1, source: "Conversations with God" },
      { text: "The purpose of life is to know yourself, create yourself, and experience yourself as Who You Really Are.", id: 2, source: "Conversations with God" },
      { text: "Life is an ongoing process of creation. You are creating your reality with every thought, word, and action.", id: 3, source: "Conversations with God" },
      { text: "Fear is the opposite of love. Every thought, word, or deed is founded in one or the other.", id: 4, source: "Conversations with God" },
      { text: "You are not here to learn lessons; you are here to remember who you are.", id: 5, source: "Conversations with God" },
      { text: "The highest purpose of any soul is to be fully self-expressed in its divinity.", id: 6, source: "Conversations with God" },
      { text: "God is not a singular super-being, but the energy of life, and you are part of it.", id: 7, source: "Conversations with God" },

      // Seth Speaks
      { text: "You create your own reality. There are no limitations to the self except those you believe in.", id: 8, source: "Seth Speaks" },
      { text: "The universe is a multidimensional school, and you are here to learn and explore your own consciousness.", id: 9, source: "Seth Speaks" },
      { text: "Your beliefs form your experience, as surely as clay shapes a pot.", id: 10, source: "Seth Speaks" },
      { text: "There is no separation between you and All That Is; you are an eternal portion of it.", id: 11, source: "Seth Speaks" },
      { text: "The present is the point of power, where all realities intersect.", id: 12, source: "Seth Speaks" },
      { text: "Your inner self knows its purpose, and it guides you through every moment.", id: 13, source: "Seth Speaks" },
      { text: "Consciousness creates form, not the other way around.", id: 14, source: "Seth Speaks" },

      // Rumi
      { text: "Out beyond ideas of wrongdoing and rightdoing, there is a field. I'll meet you there.", id: 15, source: "Rumi" },
      { text: "The wound is the place where the Light enters you.", id: 16, source: "Rumi" },
      { text: "Do not feel lonely, the entire universe is inside you.", id: 17, source: "Rumi" },
      { text: "Let the beauty we love be what we do.", id: 18, source: "Rumi" },
      { text: "What you seek is seeking you.", id: 19, source: "Rumi" },
      { text: "Stop acting so small. You are the universe in ecstatic motion.", id: 20, source: "Rumi" },
      { text: "The heart has its own language; the heart knows a hundred thousand ways to speak.", id: 21, source: "Rumi" },

      // Alan Watts (Extended)
      { text: "You are the universe experiencing itself.", id: 22, source: "Alan Watts" },
      { text: "The only way to make sense out of change is to plunge into it, move with it, and join the dance.", id: 23, source: "Alan Watts" },
      { text: "Trying to define yourself is like trying to bite your own teeth.", id: 24, source: "Alan Watts" },
      { text: "The meaning of life is just to be alive. It is so plain and so obvious and so simple.", id: 25, source: "Alan Watts" },
      { text: "You don't look out there for God, something in the sky; you look in here.", id: 26, source: "Alan Watts" },
      { text: "Life is not a problem to be solved, but a reality to be experienced.", id: 27, source: "Alan Watts" },
      { text: "To have faith is to trust yourself to the water. You don't grab hold of it; you let it carry you.", id: 28, source: "Alan Watts" },
      { text: "The more a thing tends to be permanent, the more it tends to be lifeless.", id: 50, source: "Alan Watts" },
      { text: "We do not 'come into' this world; we come out of it, as leaves from a tree.", id: 51, source: "Alan Watts" },
      { text: "No one is more dangerously insane than one who is sane all the time.", id: 52, source: "Alan Watts" },
      { text: "Muddy water is best cleared by leaving it alone.", id: 53, source: "Alan Watts" },
      { text: "The ego is nothing other than the focus of conscious attention.", id: 54, source: "Alan Watts" },
      { text: "You are under no obligation to be the same person you were five minutes ago.", id: 55, source: "Alan Watts" },
      { text: "Problems that remain persistently insoluble should always be suspected as questions asked in the wrong way.", id: 56, source: "Alan Watts" },
      { text: "The art of living is neither careless drifting nor fearful clinging, but a dance.", id: 57, source: "Alan Watts" },
      { text: "What you are basically, deep deep down, is simply the fabric and structure of existence itself.", id: 58, source: "Alan Watts" },

      // Florence Scovel Shinn
      { text: "Theof life is a game of boomerangs. Our thoughts, deeds, and words return to us sooner or later with astounding accuracy.", id: 29, source: "Florence Scovel Shinn" },
      { text: "Every great work, every big accomplishment, has been brought into manifestation through holding to the vision.", id: 30, source: "Florence Scovel Shinn" },
      { text: "Your word is your wand. The words you speak create your own destiny.", id: 31, source: "Florence Scovel Shinn" },
      { text: "There is no loss in divine mind; therefore, I cannot lose anything that is rightfully mine.", id: 32, source: "Florence Scovel Shinn" },
      { text: "Faith is an active force, a power that moves mountains.", id: 33, source: "Florence Scovel Shinn" },
      { text: "The Divine Plan unfolds through your trust and inspired action.", id: 34, source: "Florence Scovel Shinn" },
      { text: "Intuition is the voice of God within, guiding you to your good.", id: 35, source: "Florence Scovel Shinn" },

      // Buddhist Teachings (Extended)
      { text: "Do not dwell in the past, do not dream of the future, concentrate the mind on the present moment.", id: 61, source: "Buddha" },
      { text: "Peace comes from within. Do not seek it without.", id: 62, source: "Buddha" },
      { text: "Holding onto anger is like drinking poison and expecting the other person to die.", id: 63, source: "Buddhist proverb" },
      { text: "Thousands of candles can be lit from a single candle, and the life of the candle will not be shortened.", id: 64, source: "Buddha" },
      { text: "You yourself, as much as anybody in the entire universe, deserve your love and affection.", id: 65, source: "Buddha" },
      { text: "In the end, only three things matter: how much you loved, how gently you lived, and how gracefully you let go.", id: 66, source: "Buddhist saying" },
      { text: "The root of suffering is attachment.", id: 67, source: "Buddha" },
      { text: "There is no path to happiness: happiness is the path.", id: 68, source: "Buddha" },
      { text: "All that we are is the result of what we have thought.", id: 69, source: "Buddha" },
      { text: "Better than a thousand hollow words is one word that brings peace.", id: 70, source: "Buddha" },
      { text: "Just as a snake sheds its skin, we must shed our past over and over again.", id: 71, source: "Buddha" },
      { text: "The mind is everything. What you think you become.", id: 72, source: "Buddha" },
      { text: "To understand everything is to forgive everything.", id: 73,
      { text: "To understand everything is to forgive everything.", id: 73, source: "Buddha" },
      { text: "No one saves us but ourselves. No one can and no one may. We ourselves must walk the path.", id: 74, source: "Buddha" },
      { text: "Work out your own salvation. Do not depend on others.", id: 75, source: "Buddha" },

      // Tao Te Ching (Extended)
      { text: "The Tao that can be told is not the eternal Tao.", id: 76, source: "Lao Tzu, Tao Te Ching" },
      { text: "Nature does not hurry, yet everything is accomplished.", id: 77, source: "Lao Tzu, Tao Te Ching" },
      { text: "When I let go of what I am, I become what I might be.", id: 78, source: "Lao Tzu, Tao Te Ching" },
      { text: "A good traveler has no fixed plans and is not intent on arriving.", id: 79, source: "Lao Tzu, Tao Te Ching" },
      { text: "Knowing others is intelligence; knowing yourself is true wisdom.", id: 80, source: "Lao Tzu, Tao Te Ching" },
      { text: "The soft overcomes the hard; the gentle overcomes the rigid.", id: 81, source: "Lao Tzu, Tao Te Ching" },
      { text: "He who knows he has enough is rich.", id: 82, source: "Lao Tzu, Tao Te Ching" },
      { text: "The journey of a thousand miles begins with one step.", id: 83, source: "Lao Tzu, Tao Te Ching" },
      { text: "When you realize there is nothing lacking, the whole world belongs to you.", id: 84, source: "Lao Tzu, Tao Te Ching" },
      { text: "Silence is a source of great strength.", id: 85, source: "Lao Tzu, Tao Te Ching" },
      { text: "Be content with what you have; rejoice in the way things are.", id: 86, source: "Lao Tzu, Tao Te Ching" },
      { text: "To the mind that is still, the whole universe surrenders.", id: 87, source: "Lao Tzu, Tao Te Ching" },
      { text: "Health is the greatest possession. Contentment is the greatest treasure.", id: 88, source: "Lao Tzu, Tao Te Ching" },
      { text: "Respond intelligently even to unintelligent treatment.", id: 89, source: "Lao Tzu, Tao Te Ching" },
      { text: "New beginnings are often disguised as painful endings.", id: 90, source: "Lao Tzu, Tao Te Ching" },

      // Law of One (Extended)
      { text: "All is one. There is no polarity, no right or wrong, no disharmony, but only identity.", id: 91, source: "Law of One" },
      { text: "The universe is one being. When you harm another, you harm yourself.", id: 92, source: "Law of One" },
      { text: "Service to others is the path to unity with the Infinite.", id: 93, source: "Law of One" },
      { text: "The Creator is not separate from the creation; it is the creation.", id: 94, source: "Law of One" },
      { text: "Love is the vibration which creates, builds, and maintains all things.", id: 95, source: "Law of One" },
      { text: "The purpose of incarnation is to learn the ways of love.", id: 96, source: "Law of One" },
      { text: "There is no right or wrong. There is no polarity for all will be reconciled in time.", id: 97, source: "Law of One" },
      { text: "The heart of spiritual evolution is understanding that all beings are the Creator.", id: 98, source: "Law of One" },
      { text: "The path back to the One is through love, understanding and acceptance.", id: 99, source: "Law of One" },
      { text: "Each entity contains all of creation within its consciousness.", id: 100, source: "Law of One" },
      { text: "The present moment contains all that there is.", id: 101, source: "Law of One" },
      { text: "The greatest service is to be and to allow others to be.", id: 102, source: "Law of One" },
      { text: "All things, all of life, all of the creation is part of one original thought.", id: 103, source: "Law of One" },
      { text: "The purpose of the illusion is that the Creator may know Itself.", id: 104, source: "Law of One" },
      { text: "The energy of the Creator is love/light, light/love.", id: 105, source: "Law of One" },

      // Emerald Tablet (Extended)
      { text: "As above, so below; as below, so above.", id: 116, source: "Emerald Tablet" },
      { text: "That which is below is like that which is above, and that which is above is like that which is below, to accomplish the miracles of one thing.", id: 117, source: "Emerald Tablet" },
      { text: "The Sun is its father, the Moon its mother, the Wind carries it in its belly, the Earth is its nurse.", id: 118, source: "Emerald Tablet" },
      { text: "All things are born from this one thing by adaptation.", id: 119, source: "Emerald Tablet" },
      { text: "The universe is mental, held in the mind of the All.", id: 107, source: "Emerald Tablet" },
      { text: "Separate the earth from the fire, the subtle from the gross, gently and with great care.", id: 120, source: "Emerald Tablet" },
      { text: "Its power is complete when it is turned to earth.", id: 121, source: "Emerald Tablet" },

      // Additional Wisdom
      { text: "Be the change you wish to see in the world.", id: 108, source: "Mahatma Gandhi" },
      { text: "What we think, we become.", id: 109, source: "Mahatma Gandhi" },
      { text: "The only real valuable thing is intuition.", id: 110, source: "Albert Einstein" },
      { text: "Everything is energy and that's all there is to it.", id: 111, source: "Albert Einstein" },
      { text: "The privilege of a lifetime is to become who you truly are.", id: 112, source: "Carl Jung" },
      { text: "Your vision will become clear only when you can look into your own heart.", id: 113, source: "Carl Jung" },
      { text: "We are not human beings having a spiritual experience. We are spiritual beings having a human experience.", id: 114, source: "Pierre Teilhard de Chardin" },
      { text: "The day science begins to study non-physical phenomena, it will make more progress in one decade than in all the previous centuries.", id: 115, source: "Nikola Tesla" }
    ];

    // Enhanced state management
    let usedPassages = JSON.parse(localStorage.getItem('usedPassages')) || [];
    let favorites = JSON.parse(localStorage.getItem('favorites')) || [];
    let quotesRead = parseInt(localStorage.getItem('quotesRead')) || 0;
    let currentQuote = null;
    let isGenerating = false;
    let voicesLoaded = false;

    // Initialize voices
    window.speechSynthesis.onvoiceschanged = () => {
      voicesLoaded = true;
    };

    // Theme management
    function setTheme(theme) {
      document.body.className = theme;
      localStorage.setItem('selectedTheme', theme);
    }

    // Daily quote functionality
    function getDailyQuote() {
      const today = new Date().toDateString();
      const stored = localStorage.getItem('dailyQuote');
      
      if (stored) {
        const dailyData = JSON.parse(stored);
        if (dailyData.date === today) {
          return dailyData.quote;
        }
      }
      
      // Generate new daily quote based on date seed for consistency
      const dateHash = today.split('').reduce((a, b) => {
        a = ((a << 5) - a) + b.charCodeAt(0);
        return a & a;
      }, 0);
      
      const index = Math.abs(dateHash) % passages.length;
      const dailyQuote = passages[index];
      
      localStorage.setItem('dailyQuote', JSON.stringify({
        date: today,
        quote: dailyQuote
      }));
      
      return dailyQuote;
    }

    // Display daily quote
    function displayDailyQuote() {
      const dailyQuote = getDailyQuote();
      document.getElementById('dailyQuoteContent').innerHTML = `
        <p style="font-style: italic; font-size: 1.1em; margin-bottom: 10px;">"${dailyQuote.text}"</p>
        <small>‚Äî ${dailyQuote.source}</small>
      `;
    }

    // Update statistics
    function updateStats() {
      document.getElementById('totalQuotes').textContent = passages.length;
      document.getElementById('quotesRead').textContent = quotesRead;
      document.getElementById('favoriteCount').textContent = favorites.length;
    }

    // Enhanced audio generation
    function generateAudio(text, autoPlay = false) {
      const utterance = new SpeechSynthesisUtterance(text);
      utterance.lang = 'en-US';
      utterance.pitch = 0.8;
      utterance.rate = 0.9;
      utterance.volume = 0.8;

      if (voicesLoaded) {
        const voices = window.speechSynthesis.getVoices();
        const preferredVoice = voices.find(voice => 
          voice.name.includes('Google') || 
          voice.name.includes('Microsoft') ||
          voice.lang === 'en-US'
        );
        if (preferredVoice) {
          utterance.voice = preferredVoice;
        }
      }

      if (autoPlay) {
        window.speechSynthesis.speak(utterance);
      }

      return utterance;
    }

    // Favorites management
    function toggleFavorite(quote) {
      const existingIndex = favorites.findIndex(fav => fav.id === quote.id);
      
      if (existingIndex === -1) {
        favorites.push(quote);
        showNotification('Added to favorites! ‚ù§Ô∏è');
      } else {
        favorites.splice(existingIndex, 1);
        showNotification('Removed from favorites');
      }
      
      localStorage.setItem('favorites', JSON.stringify(favorites));
      updateFavoriteButton();
      updateStats();
      displayFavorites();
    }

    function updateFavoriteButton() {
      const favoriteBtn = document.getElementById('favoriteBtn');
      if (currentQuote) {
        const isFavorited = favorites.some(fav => fav.id === currentQuote.id);
        favoriteBtn.textContent = isFavorited ? 'üíñ Saved' : '‚ù§Ô∏è Save';
        favoriteBtn.classList.toggle('favorited', isFavorited);
      }
    }

    // Display favorites
    function displayFavorites() {
      const favoritesGrid = document.getElementById('favoritesGrid');
      favoritesGrid.innerHTML = '';
      
      if (favorites.length === 0) {
        favoritesGrid.innerHTML = '<p style="text-align: center; opacity: 0.8;">No favorites saved yet. Click the heart on quotes you love!</p>';
        return;
      }
      
      favorites.forEach(quote => {
        const favoriteItem = document.createElement('div');
        favoriteItem.className = 'favorite-item';
        favoriteItem.innerHTML = `
          <p style="font-style: italic; margin-bottom: 10px;">"${quote.text}"</p>
          <small style="opacity: 0.8;">‚Äî ${quote.source}</small>
          <button onclick="removeFavorite(${quote.id})" style="float: right; background: none; border: none; color: white; cursor: pointer; font-size: 1.2em;">üóëÔ∏è</button>
        `;
        favoritesGrid.appendChild(favoriteItem);
      });
    }

    function removeFavorite(id) {
      favorites = favorites.filter(fav => fav.id !== id);
      localStorage.setItem('favorites', JSON.stringify(favorites));
      displayFavorites();
      updateStats();
      updateFavoriteButton();
    }

    function toggleFavorites() {
      const favoritesSection = document.getElementById('favoritesSection');
      const isVisible = favoritesSection.style.display !== 'none';
      favoritesSection.style.display = isVisible ? 'none' : 'block';
      
      if (!isVisible) {
        displayFavorites();
      }
    }

    // Enhanced quote generation with filtering
    function generatePassage() {
      if (isGenerating) return;
      isGenerating = true;

      const button = document.getElementById('crossButton');
      button.classList.add('active');
      
      setTimeout(() => {
        button.classList.remove('active');
        isGenerating = false;
      }, 4000);

      // Get filtered passages
      const sourceFilter = document.getElementById('sourceFilter').value;
      let availablePassages = passages;
      
      if (sourceFilter !== 'all') {
        availablePassages = passages.filter(p => p.source.includes(sourceFilter));
      }
      
      // Filter out used passages
      availablePassages = availablePassages.filter(p => !usedPassages.includes(p.id));

      if (availablePassages.length === 0) {
        usedPassages = [];
        availablePassages = sourceFilter === 'all' ? passages : passages.filter(p => p.source.includes(sourceFilter));
      }

      const randomPassage = availablePassages[Math.floor(Math.random() * availablePassages.length)];
      usedPassages.push(randomPassage.id);
      localStorage.setItem('usedPassages', JSON.stringify(usedPassages));
      
      // Update read count
      quotesRead++;
      localStorage.setItem('quotesRead', quotesRead.toString());
      
      currentQuote = randomPassage;
      displayQuote(randomPassage);
      updateStats();
    }

    // Enhanced quote display
    function displayQuote(quote) {
      const quoteCard = document.getElementById('quoteCard');
      const quoteText = document.getElementById('quoteText');
      const quoteSource = document.getElementById('quoteSource');
      
      quoteText.textContent = `"${quote.text}"`;
      quoteSource.textContent = `‚Äî ${quote.source}`;
      
      quoteCard.style.display = 'block';
      setTimeout(() => {
        quoteCard.classList.add('show');
      }, 100);
      
      updateFavoriteButton();
      
      // Auto-play audio
      const utterance = generateAudio(quote.text, true);
      
      // Setup button handlers
      document.getElementById('playBtn').onclick = () => {
        window.speechSynthesis.cancel();
        window.speechSynthesis.speak(utterance);
      };
      
      document.getElementById('favoriteBtn').onclick = () => toggleFavorite(quote);
      
      document.getElementById('shareBtn').onclick = () => shareQuote(quote);
      
      document.getElementById('copyBtn').onclick = () => copyQuote(quote);
    }

    // Share functionality
    async function shareQuote(quote) {
      const shareData = {
        title: 'Divine Wisdom',
        text: `"${quote.text}" ‚Äî ${quote.source}`,
        url: window.location.href
      };

      if (navigator.share) {
        try {
          await navigator.share(shareData);
          showNotification('Shared successfully! ‚ú®');
        } catch (err) {
          fallbackShare(shareData);
        }
      } else {
        fallbackShare(shareData);
      }
    }

    function fallbackShare(shareData) {
      const encodedText = encodeURIComponent(shareData.text);
      const platforms = [
        { name: 'Twitter', url: `https://twitter.com/intent/tweet?text=${encodedText}` },
        { name: 'Facebook', url: `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(shareData.url)}&quote=${encodedText}` },
        { name: 'WhatsApp', url: `https://api.whatsapp.com/send?text=${encodedText}` }
      ];
      
      const platform = platforms[Math.floor(Math.random() * platforms.length)];
      window.open(platform.url, '_blank');
      showNotification(`Opening ${platform.name}...`);
    }

    // Copy to clipboard
    async function copyQuote(quote) {
      const text = `"${quote.text}" ‚Äî ${quote.source}`;
      
      try {
        await navigator.clipboard.writeText(text);
        showNotification('Copied to clipboard! üìã');
      } catch (err) {
        // Fallback for older browsers
        const textArea = document.createElement('textarea');
        textArea.value = text;
        document.body.appendChild(textArea);
        textArea.select();
        document.execCommand('copy');
        document.body.removeChild(textArea);
        showNotification('Copied to clipboard! üìã');
      }
    }

    // Notification system
    function showNotification(message) {
      const notification = document.createElement('div');
      notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: rgba(0, 0, 0, 0.8);
        color: white;
        padding: 15px 20px;
        border-radius: 10px;
        z-index: 1000;
        animation: slideIn 0.3s ease;
      `;
      notification.textContent = message;
      
      document.body.appendChild(notification);
      
      setTimeout(() => {
        notification.style.animation = 'slideOut 0.3s ease';
        setTimeout(() => {
          document.body.removeChild(notification);
        }, 300);
      }, 3000);
    }

    // Keyboard navigation
    document.addEventListener('keydown', (event) => {
      if (event.key === ' ' && event.target === document.body) {
        event.preventDefault();
        generatePassage();
      }
    });

    // Event listeners
    document.getElementById('themeSelector').addEventListener('change', (e) => {
      setTheme(e.target.value);
    });

    document.getElementById('sourceFilter').addEventListener('change', () => {
      // Reset used passages when filter changes
      usedPassages = [];
      localStorage.setItem('usedPassages', JSON.stringify(usedPassages));
    });

    // Add CSS animations
    const style = document.createElement('style');
    style.textContent = `
      @keyframes slideIn {
        from { transform: translateX(100%); opacity: 0; }
        to { transform: translateX(0); opacity: 1; }
      }
      
      @keyframes slideOut {
        from { transform: translateX(0); opacity: 1; }
        to { transform: translateX(100%); opacity: 0; }
      }
    `;
    document.head.appendChild(style);

    // Initialize app
    function initializeApp() {
      // Load saved theme
      const savedTheme = localStorage.getItem('selectedTheme') || 'theme-ocean';
      document.getElementById('themeSelector').value = savedTheme;
      setTheme(savedTheme);
      
      // Display daily quote
      displayDailyQuote();
      
      // Update statistics
      updateStats();
      
      // Show welcome message
      setTimeout(() => {
        showNotification('Welcome to Divine Light! ‚ú® Click the cross to receive wisdom.');
      }, 1000);
    }

    // Start the app
    initializeApp();
  </script>
</body>
</html>
