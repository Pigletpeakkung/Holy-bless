<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Holy Bless - Your daily source of spiritual wisdom and inspiration.">
    <title>Holy Bless - Divine Wisdom Generator</title>

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    
    <!-- Toastify CSS for Notifications -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastify-js/1.11.2/Toastify.min.css">
    
    <!-- Custom Stylesheet -->
    <link rel="stylesheet" href="public/styles.css">
    
    <style>
        /* Add custom styles here if needed */
        body {
            background-color: #f0f0f0;
        }

        .star-button {
            font-size: 2em;
            transition: transform 0.2s;
        }

        .star-button:hover {
            transform: scale(1.1);
        }

        .blockquote {
            background: rgba(255, 255, 255, 0.9);
            border-left: 5px solid #667eea;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 5px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>
<body class="theme-ocean">
    <div class="container">
        <header class="header text-center mb-4">
            <h1 class="display-3">âœ¨ Holy Bless âœ¨</h1>
            <p class="lead">Sacred wisdom from the masters of consciousness and divine light</p>
            <p id="greetingMessage" class="font-weight-light"></p> <!-- Personalized greeting -->
        </header>

        <section class="controls mb-4">
            <label for="themeSelector" class="mr-3">Select Theme:</label>
            <select class="theme-selector" id="themeSelector">
                <option value="theme-ocean">Ocean Depths</option>
                <option value="theme-sunset">Sunset Glow</option>
                <option value="theme-forest">Forest Wisdom</option>
                <option value="theme-cosmic">Cosmic Mystery</option>
            </select>
            <label for="sourceFilter" class="ml-4 mr-3">Select Source:</label>
            <select class="source-filter" id="sourceFilter">
                <option value="all">All Sources</option>
                <option value="Alan Watts">Alan Watts</option>
                <option value="Buddha">Buddha</option>
                <option value="Lao Tzu">Lao Tzu</option>
                <option value="Rumi">Rumi</option>
                <option value="Seth Speaks">Seth Speaks</option>
                <option value="Conversations with God">Conversations with God</option>
                <option value="Emerald Tablet">Emerald Tablet</option>
            </select>
        </section>

        <section class="daily-quote" id="dailyQuote">
            <h3>ðŸŒ… Today's Sacred Message</h3>
            <blockquote id="dailyQuoteContent" class="blockquote text-center">
                <p id="quoteText">Loading...</p>
                <footer id="quoteAuthor" class="blockquote-footer"></footer>
            </blockquote>
        </section>

        <section id="reflectionArea" class="mb-4">
            <h4>Your Reflections</h4>
            <textarea id="userReflection" class="form-control" placeholder="What does this quote mean to you?" rows="4"></textarea>
            <button class="btn btn-primary mt-2" onclick="saveReflection()">Save Reflection</button>
        </section>

        <div class="star-button-container text-center mb-4">
            <button id="starButton" class="star-button btn btn-warning" aria-label="Receive divine wisdom" onclick="generatePassage()">
                <span class="star-icon">ðŸŒŸ</span>
            </button>
            <p class="star-button-text">Click the sacred star to receive your divine message</p>
        </div>

        <footer class="credit text-center mt-5">
            <p>Sacred wisdom from the teachings of: <span class="font-weight-bold">Conversations with God, Seth Speaks, Rumi, Alan Watts, Florence Scovel Shinn, Lao Tzu, Law of One, Emerald Tablet, Buddha</span>.</p>
        </footer>

        <div id="ttsStatus" class="tts-status d-none"></div>
    </div>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- Axios for API requests -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <!-- Toastify for notifications -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastify-js/1.11.2/Toastify.min.js"></script>
    <!-- Custom JS File -->
    <script src="public/app.js"></script>
    <script>
        // Placeholder for your JavaScript logic
        document.addEventListener("DOMContentLoaded", function() {
            fetchRandomQuote(); // Fetch and display the initial quote
            const today = new Date().toDateString();
            const savedQuote = JSON.parse(localStorage.getItem('dailyQuote'));
            if(savedQuote && savedQuote.date === today) {
                document.getElementById('quoteText').innerText = savedQuote.quote;
                document.getElementById('quoteAuthor').innerText = `â€” ${savedQuote.author}`;
            } else {
                fetchRandomQuote();
            }

            document.getElementById('themeSelector').addEventListener('change', setTheme);
        });

        function fetchRandomQuote() {
            axios.get("https://api.quotable.io/random")
                .then(function(response) {
                    const quote = response.data;
                    document.getElementById('quoteText').innerText = quote.content;
                    document.getElementById('quoteAuthor').innerText = `â€” ${quote.author}`;
                    localStorage.setItem('dailyQuote', JSON.stringify({ date: new Date().toDateString(), quote: quote.content, author: quote.author }));
                })
                .catch(function(error) {
                    console.error('Error fetching quote:', error);
                    showNotification("Could not fetch a quote. Please try again.");
                });
        }

        function saveReflection() {
            const reflectionText = document.getElementById('userReflection').value;
            localStorage.setItem('userReflection', reflectionText);
            showNotification('Reflection saved!');
            document.getElementById('userReflection').value = ''; // Reset textarea
        }
        
        function showNotification(message) {
            Toastify({
                text: message,
                duration: 3000,
                close: true,
                gravity: 'top',
                position: 'right',
                backgroundColor: "linear-gradient(to right, #00b09b, #96c93d)",
            }).showToast();
        }

        function setTheme() {
            const theme = document.getElementById('themeSelector').value;
            document.body.className = theme; // Set class based on selected theme
        }

        function generatePassage() {
            fetchRandomQuote(); // Trigger the quote-fetching function
        }
    </script>
</body>
</html>
